---
published: true
layout: post
title: Встановлення і налаштування Firefox
author: think4web
discription: Як встановити і налаштувати Firefox на GNU/Linux для безпечного відвідування сайтів в інтернеті.
tags: firefox privacy security
---

Firefox - найбільш універсальний браузер який можна налаштувати для отримання високого рівня приватності та безпеки. Це саме гнучкий браузер для щоденного використання який налаштовується під конкретного користувача як зовні так і функціонально, а не спеціалізований браузер що дасть вам хороший захист і конфіденційність. Усі рекомендації даються саме з цієї позиції. Якщо треба браузер з більш високим захистом - є [Tor](/Vstanovlennya-i-nalashtuvannya-Tor/). 

## Зауваження

Не існує універсальної конфігурації браузеру через різноманіття загроз і потреб користувачів. Перш ніж почати треба зрозуміти що таке "відбиток браузеру"(browser fingerprinting).

### Відбиток браузеру

Проблема відбитків браузеру (або відбитків пристрою) - це велика тема яка охоплює різні способи відстеження вашої системи. Важливо зрозуміти що чим більше доповнень ви встановлюєте і чим більше стандартних налаштувань змінюєте, тим унікальнішим стає ваш браузер і тим простіше вас ідентифікувати.

### Більше не значіть краще

Велика кількість доповнень не тільки робить браузер більш унікальним, а і може порушувати його нормальну роботу через дублювання доповненнями стандартних функцій браузеру. Тому краще встановлювати лише необхідні вам доповнення, а не усе підряд. 

Деякі з доповнень потрібних для безпеки і конфіденційності будуть перешкоджати нормальній роботі сайтів. Тому будьте обережні і слідкуйте за тим що встановлюєте та навіщо воно треба. Розумніше додавати доповнення поступово.

## Налаштування конфіденційності у Firefox

У останніх версіях Firefox був доданий збір даних та телеметрії. Щоб вимкнути це необхідно перейти у налаштування і знайти там у розділі "Безпека" блок **Firefox Data Collection and Use** та вимкнути усе. Те саме можна зробити через about:config вибравши для **toolkit.telemetry.enabled** параметр **false**.

Для Android-версії це налаштування знаходиться у **Menu** -> **Options** -> **Privacy** -> **Data Choices**.

## Налаштовуємо пошукову систему за замовчуванням

За замовчування у якості пошукової системи Firefox використовує Google. Це не найкращій вибір і краще змінити пошуковик на DuckDuckGo або щось що дає можливість шукати конфіденційно. Щоб знайти більше варіантів пошукових систем натисніть на **Find more search engines**. Можна додати пошук у певній пошуковій системі на літеру. Для цього заходимо у потрібну пошукові систему або на потрібний сайт (наприклад на GitHub), тиснемо на рядку пошуку другою кнопкою миші і знаходимо у мені пункт **Add keyword for this Search**. Вибираємо потрібну літеру і зберігаємо. Тепер якщо поставити цю літеру перед пошуковим запитом пошук буде відбуватися у потрібному місці.

## Блокування небажаного контенту

Firefox вміє блокувати непотрібний вміст сайтів, а саме:
- файли cookies
- трекери 
- криптомайнери
- fingerprinters

Щоб налаштувати потрібний рівень блокування у **Content Blocking** виберіть опцію  **Standard** - найкращій вибір для більшості або **Strict** - може викликати помилки на деяких сайтах, якщо потрібно зробити виключення то на потрібному вебсайті тиснемо на емблему з літерою **i** зліва від адресного рядку і вимикаємо блокування контенту. Блокування небажаного контенту може покращити швидкість завантаження сторінок і швидкодію браузеру.

## "Не відслідковуйте мене"

Ця опція просить сайти не відслідковувати вас, але нічого не блокує і лише просить, більшість сайтів все одно її ігнорують. Хоча зміна дефолтних налаштувань **Do Not Track** унікалізує ваш браузер і допомагає вас ідентифікувати за цифровими відбитками. Тому краще нічого не чіпати і залишити дану опцію як є.

## Налаштування about:config

Ці налаштування частково дублюють налаштування зроблені нами раніше. Введіть у адресному рядку ```about:config```, на попередження відповідайте **I accept the risk**. Подвійний клік на рядку для зміни налаштувань. Рекомендується змінити наступне:
- **media.peerconnection.enabled (WebRTC) = false** - спілкування голосом і відео у реальному часі, потенційно здатне відкрити вашу справжню IP-адресу через STUN-запит браузера (WebRTC leak) навіть при використанні хорошого VPN.
- **privacy.resistFingerprinting = true** - захищає відбитки і ускладнює процес ідентифікації браузеру.
- **privacy.trackingprotection.fingerprinting.enabled = true** - те саме у нових версіях Firefox.
- **privacy.trackingprotection.cryptomining.enabled = true** - захист від криптомайнерів у нових версіях Firefox.
- **privacy.firstparty.isolate = true** - ізолює файли cookies від основного домену що запобігає відстеженню у кількох доменах.
- **privacy.trackingprotection.enabled = true** - вбудований захист від відстеження, використовує фільтри Disconnect.me. Ці самі функції дублює **uBlock Origin**
- **geo.enabled = false** - вимикає відстеження місцезнаходження, яке може бути запитане сайтом. За замовчуванням для визначення геолокації використовую геолокацію Google в яку передається IP-адреса комп'ютеру, інформацію про найближці точки Wi-Fi та випадковий ідентифікатор клієнту (термін якого спливає за два тижні). Перш ніж передати ці дані сайт дає запит за повідомлення геолокації, тому це можна контролювати.
- **media.navigator.enabled = false** - блокує сайтам доступ до мікрофону і камері. 
- **network.cookie.cookieBehavior** - параметри налаштування cookies, існують наступні варіанти:
  - 0 - приймати усі cookies за замовчуванням;
  - 1 - приймати cookies ліше з орігінального сайту і блокувати сторонні cookies;
  - 2 - блокувати усі cookies за замовчуванням;
  - 3 - блокувати cookies з сайтів які ви не відвідували;
  - 4 - нова політика Cookie Jar - заборонити доступ трекерів до сховища cookies.
  Можна вибрати що завгодно на свій смак між 1-4. 4 дає більше захисту, але може порушити роботу деяких вебсайтів. Більше про Cookies Jar можна почитати [тут](https://www.ghacks.net/2018/09/23/firefox-65-new-cookie-jar-policy-to-block-tracking/).
- **network.cookie.lifetimePolicy = 2** - ще одне налаштування cookies, є наступні варіанти:
  - 0 - приймати cookies за замовчуванням;
  - 1 - запитувати для кожного cookies;
  - 2 - прийняти cookies лише для поточного сеансу;
  - 3 - прийняти на певну кількість днів;
  При значенні параметру **2** усі сайти мають працювати нормально, а усі файли cookies видалятися після закінчення сеансу.
- **network.dns.disablePrefetch = true** - забороняє Firefox "попередньо завантажувати" запити DNS, що трохи уповільніть роботу, але допоможе уникнути [деяких ризиків](https://www.usenix.org/legacy/events/leet10/tech/full_papers/Krishnan.pdf).
- **network.prefetch-next = false** - забороняє Firefox попередньо завантажувати сторінки, що також уповільніть роботу, але підвищить конфіденційність;
- **webgl.disabled = true** - WebGL потенційно [загрожує безпеці](https://security.stackexchange.com/questions/13799/is-webgl-a-security-concern) і може бути використаний для ідентифікації браузеру, тому вимикаємо його. Більше інформації про те що це є [тут](https://www.contextis.com/blog/webgl-a-new-dimension-for-browser-exploitation), і [тут](https://www.khronos.org/webgl/security/).
- **dom.event.clipboardevents.enabled = false** - забороняє повідомляти сайтам про те що копіюєте, вставляєте або вирізаєте щось зі сторінки.
- **media.eme.enabled = false** - вимикає відтворення HTML5-контенту, керованного DRM. Більше інформації [тут](https://support.mozilla.org/en-US/kb/enable-drm#w_opt-out-of-cdm-playback-uninstall-cdms-and-stop-all-cdm-downloads).

## "Безпечний перегляд" у Firefox

Раніше з цім налаштуванням були проблеми і його радили вимикати через ризики безпеці і потенційну можливість відстеження зі сторони Google. Але це стосувалося більш старих версій Firefox і з 2011 року старі методи не використовуються. Тому "безпечний перегляд" можна зилишити.

- **browser.safebrowsing.phishing.enabled = true**
- **browser.safebrowsing.malware.enabled = true**

## Доповнення для конфіденційності і безпеки

Деякі функції для підвищення безпеки, які раніше реалізовувались через доповнення, зараз стали частиною Firefox. Тому слідкуйте щоб доповнення не конфліктували з базовим функціоналом браузеру:
- [uBlock Origin](https://addons.mozilla.org/en-US/firefox/addon/ublock-origin/) - блокувальник реклами і відстеження, альтернатива Adblock Plus, який тепер дозволяє "прийнятну рекламу". Дозволяє додати сайти до "білого списку" і не блокувати на них нічого. Вміє перекроювати сайт як захочеться вирізаючі які завгодно елементи що заважають. Відкритий код є на [GitGub](https://github.com/gorhill/uBlock)
- [uMatrix](https://addons.mozilla.org/en-US/firefox/addon/umatrix/) - те саме що uBlock, вміє блокувати рекламу на рівні домену.
- [NoScript](https://noscript.net/) - блокувальник скриптів на сайтах. Доповнення може бути важко налаштувтаи правильно і воно буде ламати роботу багатьох сайтів, може конфліктувати з uBlock. Навряд це доповнення підходить для звичайного користувача, який не буде витрачати час на його налаштування.

## VPN для Firefox

Ніякі спеціальні доповнення для браузеру які дають VPN не потрібні. VPN має працювати для усього трафіку системи, а не лише для браузeру. 

### Firefox DNS через HTTPS (DoH) це не найкраща ідея

Зараз DoH є загрозою конфіденційності бо більша частина його роботи залежить від третьої сторони. Щоб вимкнути DNS через HTTPS треба перейти: **Options** -> **General** ->  **Network Settings** ->  **Settings** ->  **Enable DNS over HTTPS** -> **disabled**.

## user.js 

Цей файл конфігурації може керувати сотніями налаштувань браузеру. Додаткова інформація є [тут](https://github.com/ghacksuserjs/ghacks-user.js). Більше про user.js можна почитати на сторінці [GitHub](https://github.com/ghacksuserjs/ghacks-user.js/wiki).

Можна скористатися інструкцією на [spyware.neocities.org](https://spyware.neocities.org/guides/firefox.html).

## Висновки щодо приватності Firefox

При усіх налаштуваннях зазначених вище, ваша IP-адреса та місцезнаходження залишаються відкритими. Щоб сховати їх треба хороший VPN-сервіс або Tor, але Tor буде різати швидкість, має свої недоліки та обмеження.

## Налаштування зовнішнього виду

Для підключення користувацких стилей необхідно виставити:
**toolkit.legacyUserProfileCustomizations.stylesheets = true**

Тепер можна створити і редагувати файл ```~/.mozilla/firefox/%ваш_профіль%/chrome/userChrome.css```.

Адаптація і доповнення статті [Firefox Privacy – The Complete How-To Guide for 2021](https://restoreprivacy.com/firefox-privacy/).
