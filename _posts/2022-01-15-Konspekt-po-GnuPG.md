---
published: true
layout: post
title: Конспект по GnuPG 
author: think4web
discription:
tags: gpg
---

## Опції конфігурації

Файл конфігурації GPG: ```~/.gnupg/gpg.conf```. Усі опції записуються без префікса ```--```.

```throw-keyids``` - не включати інформацію про ключ у зашифроване повідомлення. Опція може бути корисна для анонімазації отримувача повідомлення;

```no-emit-version``` - не вставляти версію GPG у зашифроване повідомлення;

```no-comments``` - прибирати коментарі з зашифрованого повідомлення.

## Опції команд

```--delete-key``` - видалити публічний ключ;

```--delete-secret-key``` - видлити приватний ключ. Приватний клюі можна видалити тільки після видалення публічного ключа з пари;

```--symmetric, -c``` - симетричне шифрування;

```--fingerprint``` - вивести відбиток ключа;

```--armor, -a``` - створює ASCII вивід, який можна вивісти на екран, відправити у месенджері або електронною поштою;

```--encrypt, -e``` - зашифрувати повідомлення;

```--recipient, -r``` - вказати ключ який буде використовуватися для шифрування;

```--decrypt, -d``` - розшифрувати повідомлення;

```--sign, -s``` - підписати повідомлення, підпис буде знаходитись окремо від повідомлення;

```--clear-sign, --clearsign``` - підписати повідомлення, підпис буде збережений разом з повідомленням;

```--local-user, -u``` - вказувати ключ що буде використовуватись для підпису, схоже на опцію ```--recipient``` але не те саме;

```--verify``` - перевірити підпис;

```--list-keys, -k``` - показати список публічних ключів;

```--list-secret-keys, -K``` - показати список приватних ключів;

```--export``` - експортувати публічний ключ у файл;

```--import``` - імпортувати публічний ключ у зв'язку;

```--edit-key``` - редагувати ключ;

```--expert``` - експертний режим.

Для використання у скриптах у GPG є хороше API, що активується наступними опціями:

```--with-colons``` -

```--status-fd``` -

```--command-fd``` -

## Публікація ключив

Ключі відправлені на сервер публічних ключів неможливо видалити. Їх можливо тільки відкликати, що не видалить інформацію про них з серверу. 

Адресу серверу ключів можна додати у ```gpg.conf``` у рядку ```keyserver %URL%```.

```gpg --keyserver %URL% --send-keys %KeyID%``` - відправити публічний ключ на сервер;

```gpg --keyserver %URL% --recv-keys %KeyID%``` - отримати публічний ключ з серверу;

```gpg --keyserver %URL% --refresh-keys``` - оновити інформацію про ключ з серверу;

## Відкликання ключів

Створення сертифікату відкликання:

```bash
gpg -a --gen-revoke %KeyID% > %KeyID%.rev
```

Імпорт сертифікату відкликання до зв'язки ключів що відкличе відповідний ключ **%KeyID%**:

```bash
gpg --import %KeyID%.rev
```

## Підписання ключів

Для підписання необхідно перейти до редагування ключа: ```gpg --edit-key %KeyID%```.

## Приклади

Симетричне (**-c**) шифрування файлу ```test.txt``` паролем:

```bash
gpg -c test.txt
```
Команда створить шифрований файл ```test.txt.gpg```.

Симетричне (**-c**) шифрування (**-e**) файлу ```test.txt``` приватним ключем та паролем для користувача (**-r**) **"User Name"**:

```bash
gpg -c -e -r 'User Name' test.txt
```

Розшифрувати файл можна буде ключем або паролем. Якщо у зв'язці буде присутній приватний ключі - для розшифровки програма запитає пароль від нього, якщо ні - програма запитає пароль яким шифрувався файл.

Асиметричне шифрування файлу ```test.txt``` публічним ключем для користувача (**-r**) **"User Name"**:

```bash
gpg -e -r 'User Name' test.txt
```
Замість опції **"-r"** (ім'я адресату) можна використати опцію **"-R"** (```--hidden-recipient```), що приховає ім'я адресату. У протилежному випадку ім'я адресату можна буде подивитися не розшифровуючи файл.


